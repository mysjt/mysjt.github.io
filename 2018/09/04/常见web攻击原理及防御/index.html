<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32x32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16x16.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="web安全," />





  <link rel="alternate" href="/atom.xml" title="Secer" type="application/atom+xml" />






<meta name="keywords" content="web安全">
<meta property="og:type" content="article">
<meta property="og:title" content="史前的就业班  TOP N">
<meta property="og:url" content="http://yoursite.com/2018/09/04/常见web攻击原理及防御/index.html">
<meta property="og:site_name" content="Secer">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/pasted-217.png">
<meta property="og:updated_time" content="2018-09-08T11:47:53.166Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="史前的就业班  TOP N">
<meta name="twitter:image" content="http://yoursite.com/images/pasted-217.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/09/04/常见web攻击原理及防御/"/>





  <title>史前的就业班  TOP N | Secer</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Secer</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/04/常见web攻击原理及防御/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shiqian">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Secer">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">史前的就业班  TOP N</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-04T20:30:05+08:00">
                2018-09-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web安全/" itemprop="url" rel="index">
                    <span itemprop="name">web安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <hr>
<a id="more"></a>
<p>繁华一场梦</p>
<p><img src="\images\pasted-217.png" alt="upload successful"></p>
<h1 id="注入"><a href="#注入" class="headerlink" title="注入"></a>注入</h1><h2 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h2><h3 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h3><p>所谓SQL注入，就是通过把恶意数据插入到SQL命令查询中，最终达到欺骗服务器执行恶意的SQL命令的目的，产生的本质是把用户输入的数据当做代码执行。</p>
<h3 id="产生条件"><a href="#产生条件" class="headerlink" title="产生条件"></a>产生条件</h3><p>用户能够控制数据的输入</p>
<p>执行的代码，拼接了用户的输入</p>
<h3 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">参数化查询</span><br><span class="line"></span><br><span class="line">安全的存储过程</span><br><span class="line"></span><br><span class="line">白名单验证输入</span><br><span class="line"></span><br><span class="line">转义用户输入</span><br><span class="line"></span><br><span class="line">在数据库层上，采用最小权限原则。</span><br><span class="line"></span><br><span class="line">规范编码,字符集</span><br></pre></td></tr></table></figure>
<h2 id="XML实体注入-XXE"><a href="#XML实体注入-XXE" class="headerlink" title="XML实体注入(XXE)"></a>XML实体注入(XXE)</h2><h3 id="原理：-1"><a href="#原理：-1" class="headerlink" title="原理："></a>原理：</h3><p>XML是一种常见的标记语言，XML 是对 HTML 的补充，XML 允许创作者定义自己的标签和自己的文档结构。</p>
<p>XXE漏洞发生在应用程序解析XML输入时，没有禁止外部实体的加载，导致可加载恶意外部文件，造成文件读取、命令执行、内网端口扫描、攻击内网网站、发起dos攻击等危害。xxe漏洞触发的点往往是可以上传xml文件的位置，没有对上传的xml文件进行过滤，导致可上传恶意xml文件。</p>
<h3 id="防御："><a href="#防御：" class="headerlink" title="防御："></a>防御：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用简单的数据格式（如： JSON）</span><br><span class="line"></span><br><span class="line">对用户输入的数据中包含的“语言本身的保留字符” 进行转义</span><br><span class="line"></span><br><span class="line">禁用XML外部实体</span><br><span class="line"></span><br><span class="line">采用白名单对输入进行过滤</span><br><span class="line"></span><br><span class="line">及时升级打补丁</span><br></pre></td></tr></table></figure>
<h2 id="代码注入"><a href="#代码注入" class="headerlink" title="代码注入"></a>代码注入</h2><h3 id="命令执行漏洞"><a href="#命令执行漏洞" class="headerlink" title="命令执行漏洞"></a>命令执行漏洞</h3><h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在操作系统中，“&amp;、|、||”都可以作为命令连接符使用，用户通过控制命令执行函数中的参数，注入恶意系统命令到正常命令中，由于服务器端没有针对执行函数做过滤，导致在没有指定绝对路径的情况下就执行命令。</span><br></pre></td></tr></table></figure>
<h5 id="防御-1"><a href="#防御-1" class="headerlink" title="防御"></a>防御</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">禁用eval（）、system（）等可以执行命令的危险函数</span><br><span class="line"></span><br><span class="line">对参数进行过滤，对敏感字符进行转义</span><br><span class="line"></span><br><span class="line">参数值尽量使用引号包括</span><br></pre></td></tr></table></figure>
<h3 id="本地文件包含-LFI"><a href="#本地文件包含-LFI" class="headerlink" title="本地文件包含(LFI)"></a>本地文件包含(LFI)</h3><h5 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">本地文件包含就是通过浏览器包含Web服务器上的文件，即能打开并包含本地文件的漏洞</span><br><span class="line"></span><br><span class="line">文件包含在 php 中，涉及到的危险函数有四个，分别是 include()、include_once()、require()、require_once()</span><br></pre></td></tr></table></figure>
<h5 id="防御-2"><a href="#防御-2" class="headerlink" title="防御"></a>防御</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">禁用. 点，防止URL回溯上级目录</span><br><span class="line"></span><br><span class="line">禁用0字节，防止0字节截断</span><br><span class="line"></span><br><span class="line">在PHP中用open_basedir(限制在某个特定目录下PHP能打开的文件)限制访问的文件目录</span><br><span class="line"></span><br><span class="line">避免包含动态变量</span><br></pre></td></tr></table></figure>
<h3 id="远程文件包含-RFI"><a href="#远程文件包含-RFI" class="headerlink" title="远程文件包含(RFI)"></a>远程文件包含(RFI)</h3><h5 id="原理-2"><a href="#原理-2" class="headerlink" title="原理"></a>原理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当服务器的php配置中，选项allow_url_fopen与allow_url_include为开启状态时，服务器会允许包含远程服务器上的文件，如果对文件来源没有检查的话，就容易导致任意远程代码执行。</span><br></pre></td></tr></table></figure>
<h5 id="防御-3"><a href="#防御-3" class="headerlink" title="防御"></a>防御</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php.ini配置文件里allow_url_include=off</span><br></pre></td></tr></table></figure>
<h1 id="XSS-跨站脚本"><a href="#XSS-跨站脚本" class="headerlink" title="XSS(跨站脚本)"></a>XSS(跨站脚本)</h1><p>XSS又叫CSS (Cross Site Script) ，跨站脚本攻击。本质上也是注入，它指的是恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意用户的特殊目的。</p>
<h3 id="XSS分类"><a href="#XSS分类" class="headerlink" title="XSS分类"></a>XSS分类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第一种：反射型XSS       </span><br><span class="line"></span><br><span class="line">第二种：存储型XSS       </span><br><span class="line"></span><br><span class="line">第三种：DOM Based XSS</span><br></pre></td></tr></table></figure>
<h3 id="反射型XSS："><a href="#反射型XSS：" class="headerlink" title="反射型XSS："></a>反射型XSS：</h3><p>恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意攻击用户的特殊目的</p>
<h3 id="存储型XSS："><a href="#存储型XSS：" class="headerlink" title="存储型XSS："></a>存储型XSS：</h3><p>攻击者输入的恶意代码在未经过任何处理验证的情况下，保存在数据库中，所有访问数据库的用户，都会在他们的浏览器中执行该恶意代码，造成持久性攻击。</p>
<h3 id="DOM-Based-XSS"><a href="#DOM-Based-XSS" class="headerlink" title="DOM  Based  XSS:"></a>DOM  Based  XSS:</h3><p>漏洞是利用js代码中提取url地址i中的部分内容，只要网站中有这类取url的代码，就有可能回有DOM式XSS漏洞。</p>
<h3 id="防御：-1"><a href="#防御：-1" class="headerlink" title="防御："></a>防御：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用自动编码的安全框架，如Ruby 3.0</span><br><span class="line"></span><br><span class="line">对关键cookie设置HTTPOnly</span><br><span class="line"></span><br><span class="line">对输入检查:XSS Filter，对特殊字符、上下文敏感数据进行过滤或者编码</span><br><span class="line"></span><br><span class="line">对输出检查:  安全的编码函数：Htmlencode，JavaScriptencode，PHP中有htmlentities()和htmlspecialchars()</span><br><span class="line"></span><br><span class="line">对富文本过滤采用白名单</span><br><span class="line"></span><br><span class="line">对变量是整个URL的，检查是否以http开头，再进行URLencode</span><br><span class="line"></span><br><span class="line">使用内容安全策略（CSP）</span><br></pre></td></tr></table></figure>
<h3 id="XSS与CSRF的区别"><a href="#XSS与CSRF的区别" class="headerlink" title="XSS与CSRF的区别"></a>XSS与CSRF的区别</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">XSS直接作用在客户端浏览器，CSRF直接作用在服务端</span><br><span class="line"></span><br><span class="line">XSS可执行用户的任何操作；CSRF只能执行特定的操作</span><br><span class="line"></span><br><span class="line">CSRF需要用户在登录的情况下完成，XSS可以在客户端做任何JS脚本可以做的事情，即使没登录</span><br></pre></td></tr></table></figure>
<h1 id="请求伪造漏洞"><a href="#请求伪造漏洞" class="headerlink" title="请求伪造漏洞"></a>请求伪造漏洞</h1><h3 id="服务端请求伪造-SSRF"><a href="#服务端请求伪造-SSRF" class="headerlink" title="服务端请求伪造(SSRF)"></a>服务端请求伪造(SSRF)</h3><h3 id="原理-3"><a href="#原理-3" class="headerlink" title="原理"></a>原理</h3><p>由服务端发起请求的一种安全漏洞，SSRF攻击的目标是从外网无法访问的内部系统，很多web应用都提供从其他服务器上获取数据的功能，使用用户指定的URL，web应用可以下载文件，读取文件内容，攻击者恶意利用存在缺陷的web应用作为代理来攻击远程和本地的服务器</p>
<h5 id="防御-4"><a href="#防御-4" class="headerlink" title="防御"></a>防御</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">过滤返回的信息</span><br><span class="line"></span><br><span class="line">统一错误信息</span><br><span class="line"></span><br><span class="line">限制请求端口为http常用端口</span><br><span class="line"></span><br><span class="line">采用黑名单禁止访问内网IP</span><br><span class="line"></span><br><span class="line">禁用不必要的协议</span><br></pre></td></tr></table></figure>
<h3 id="跨站请求伪造-CSRF"><a href="#跨站请求伪造-CSRF" class="headerlink" title="跨站请求伪造(CSRF)"></a>跨站请求伪造(CSRF)</h3><h5 id="原理-4"><a href="#原理-4" class="headerlink" title="原理"></a>原理</h5><p>攻击者利用用户的身份发起了用户不知道的请求，包括但不限于：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">以用户名义发邮件</span><br><span class="line"></span><br><span class="line">发消息</span><br><span class="line"></span><br><span class="line">盗账号</span><br><span class="line"></span><br><span class="line">购买商品</span><br><span class="line"></span><br><span class="line">虚拟货币转账</span><br></pre></td></tr></table></figure></p>
<h5 id="防御-5"><a href="#防御-5" class="headerlink" title="防御"></a>防御</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">验证码：</span><br><span class="line">最简洁有效的防御方法，CSRF的攻击过程，往往是在用户不知情的情况下构造网络请求，验证码则要求用户必须与应用进行交互。出于用户体验考虑，验证码只能作为一种辅助手段</span><br><span class="line"></span><br><span class="line">重要操作做二次认证，如短信认证，二次密码认证</span><br><span class="line"></span><br><span class="line">敏感操作采用POST方式</span><br><span class="line"></span><br><span class="line">Referer Check：拒绝来自其他域的请求</span><br><span class="line"></span><br><span class="line">Anti CSRF token：</span><br><span class="line">CSRF的本质：其本质原因是：重要操作的所有参数都是可以被攻击者猜测到的于是可以通过把参数加密或者使用一些随机数，从而让攻击则无法猜测到参数值新增一个参数token，token的值是随机的，只被用户和服务器所共有，不被第三者知晓。</span><br></pre></td></tr></table></figure>
<h1 id="文件处理漏洞"><a href="#文件处理漏洞" class="headerlink" title="文件处理漏洞"></a>文件处理漏洞</h1><h3 id="任意文件上传"><a href="#任意文件上传" class="headerlink" title="任意文件上传"></a>任意文件上传</h3><h5 id="原理-5"><a href="#原理-5" class="headerlink" title="原理"></a>原理</h5><p>web应用程序在处理用户上传的文件时，解析了用户上传的恶意脚本文件，导致用户可以直接控制web服务器</p>
<h5 id="防御-6"><a href="#防御-6" class="headerlink" title="防御"></a>防御</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">文件上传目录设置为不可执行</span><br><span class="line"></span><br><span class="line">判断文件的类型，采用白名单策略</span><br><span class="line"></span><br><span class="line">采用随机数来存储文件名</span><br><span class="line"></span><br><span class="line">单独设置文件服务器域名</span><br></pre></td></tr></table></figure>
<h3 id="任意文件下载"><a href="#任意文件下载" class="headerlink" title="任意文件下载"></a>任意文件下载</h3><h5 id="原理-6"><a href="#原理-6" class="headerlink" title="原理"></a>原理</h5><p>网站对用户查看或下载的文件没有做限制，则恶意用户可以查看或下载任意敏感文件，下载系统的配置文件、源代码等，从而获得更多的漏洞</p>
<h5 id="防御-7"><a href="#防御-7" class="headerlink" title="防御"></a>防御</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">过滤.(点)，使用户不能在url中回溯上级目录</span><br><span class="line"></span><br><span class="line">严格判断用户输入参数的格式</span><br><span class="line"></span><br><span class="line">限制文件的访问范围，如php.ini中配置open_basedir</span><br></pre></td></tr></table></figure>
<h1 id="点击劫持"><a href="#点击劫持" class="headerlink" title="点击劫持"></a>点击劫持</h1><h3 id="原理-7"><a href="#原理-7" class="headerlink" title="原理"></a>原理</h3><p>攻击者使用一个透明的、不可见的iframe，覆盖在一个网页上，然后诱使用户在网页上操作，通过调整iframe页面位置，诱使用户在不知情下点击iframe上的恶意按钮，执行恶意代码</p>
<p>通过调整iframe的长、宽及top、left的位置，可以覆盖到任意位置，position设为absolute，z-index设为最大，保持在页面的最上层，opacity控制页面的透明度，0为完全不可见。</p>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><h5 id="Flash点击劫持"><a href="#Flash点击劫持" class="headerlink" title="Flash点击劫持"></a>Flash点击劫持</h5><p>制作一个flash，诱使用户点击，在flash上覆盖iframe，通过诱导用户鼠标点击位置，完成较复杂的流程</p>
<h5 id="图片覆盖攻击-XSIO"><a href="#图片覆盖攻击-XSIO" class="headerlink" title="图片覆盖攻击(XSIO)"></a>图片覆盖攻击(XSIO)</h5><p>通过调整图片的style使图片覆盖在攻击者所指定的任意位置，并指向一个恶意网站。</p>
<h5 id="拖曳劫持–数据窃取"><a href="#拖曳劫持–数据窃取" class="headerlink" title="拖曳劫持–数据窃取"></a>拖曳劫持–数据窃取</h5><p>诱使用户从隐藏不可见iframe中“拖曳”出攻击者希望看到的数据，然后放到攻击者能控制的另一个页面中，从而完成数据窃取。</p>
<h5 id="触屏劫持"><a href="#触屏劫持" class="headerlink" title="触屏劫持"></a>触屏劫持</h5><p>通过将一个不可见的iframe覆盖到当前的网页中，可以劫持用户的触屏操作</p>
<h3 id="防御-8"><a href="#防御-8" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">禁止跨域的iframe</span><br><span class="line"></span><br><span class="line">frame  busting</span><br><span class="line"></span><br><span class="line">HTTP头-X-Frame-Options，其值为deny时，会拒绝当前页加载任何frame页面，值为sameorigin，则frame页面的地址只能为同源域名下的页面，值为Allow-from时，可自定义允许的frame页面地址</span><br><span class="line"></span><br><span class="line">firefox的content security policy，以及Noscript的扩展</span><br></pre></td></tr></table></figure>
<h1 id="认证与会话-失效的身份认证"><a href="#认证与会话-失效的身份认证" class="headerlink" title="认证与会话-失效的身份认证"></a>认证与会话-失效的身份认证</h1><h3 id="原理-8"><a href="#原理-8" class="headerlink" title="原理"></a>原理</h3><p>认证的目的是为了认出用户是谁，而授权的目的是决定用户能够做什么。认证实际上是验证凭证的过程，按凭证的多少可分为单因素认证和双因素认证或者多因素认证。</p>
<p>常用的认证方式有：</p>
<p>密码、多因素认证、session</p>
<h3 id="防御-9"><a href="#防御-9" class="headerlink" title="防御"></a>防御</h3><h5 id="密码策略："><a href="#密码策略：" class="headerlink" title="密码策略："></a>密码策略：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用密码优点是成本低，认证简单；缺点是安全性差，易被猜解</span><br><span class="line"></span><br><span class="line">密码8位及以上，并考虑双因素</span><br><span class="line"></span><br><span class="line">要区分大小写，大小写字母、数字、特殊符号至少两种及其以上</span><br><span class="line"></span><br><span class="line">不要有连续性字符</span><br><span class="line"></span><br><span class="line">避免出现重复字符</span><br><span class="line"></span><br><span class="line">不要使用公开数据或个人隐私相关数据作为密码</span><br><span class="line"></span><br><span class="line">存储前以不可逆加密算法进行加密</span><br></pre></td></tr></table></figure>
<h5 id="多因素认证"><a href="#多因素认证" class="headerlink" title="多因素认证"></a>多因素认证</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">除密码外，可以采用动态口令、数字证书、支付盾、第三方证书等多因素进行认证，进而提高攻击的门槛</span><br></pre></td></tr></table></figure>
<h5 id="限制登录失败次数"><a href="#限制登录失败次数" class="headerlink" title="限制登录失败次数"></a>限制登录失败次数</h5><h5 id="不要使用默认凭证"><a href="#不要使用默认凭证" class="headerlink" title="不要使用默认凭证"></a>不要使用默认凭证</h5><h5 id="Session认证"><a href="#Session认证" class="headerlink" title="Session认证"></a>Session认证</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">采用成熟的开发框架</span><br><span class="line"></span><br><span class="line">在登录后采用足够强的随机数算法生成高度复杂的新随机会话ID</span><br><span class="line"></span><br><span class="line">sessionID加密后保存在cookie中</span><br><span class="line"></span><br><span class="line">一定时间后，强制销毁session</span><br><span class="line"></span><br><span class="line">当用户客户端发生变化，要求用户重新登录</span><br><span class="line"></span><br><span class="line">限制每个用户只拥有一个session</span><br></pre></td></tr></table></figure>
<h5 id="SSO单点登录"><a href="#SSO单点登录" class="headerlink" title="SSO单点登录"></a>SSO单点登录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用户只需登录一次，就可以访问所有的系统，一旦单点被攻破，将影响所有使用单点登录的系统</span><br><span class="line"></span><br><span class="line">降低这种风险的方法是在一些敏感的系统里，加入额外的认证机制，如二次输入密码和手机短信</span><br></pre></td></tr></table></figure>
<h1 id="失效的-访问控制"><a href="#失效的-访问控制" class="headerlink" title="(失效的)访问控制"></a>(失效的)访问控制</h1><h3 id="原理-9"><a href="#原理-9" class="headerlink" title="原理"></a>原理</h3><p>权限控制或者说访问控制，就是某个主体对某个客体需要实施某种操作，而系统对这种操作的限制就是权限控制。</p>
<h5 id="在操作系统中"><a href="#在操作系统中" class="headerlink" title="在操作系统中"></a>在操作系统中</h5><p>用户对文件进行操作，即为访问控制，用户、文件、操作三者构成访问控制列表ACL</p>
<p>用户对文件操作是否成功，将有操作系统给文件设置的ACL决定</p>
<p>用户能够做什么就是权限，在linux系统中，将权限分为读、写、执行</p>
<h5 id="在web应用中"><a href="#在web应用中" class="headerlink" title="在web应用中"></a>在web应用中</h5><p>根据访问客体不同，可以分为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">‘基于URL的访问控制’</span><br><span class="line"></span><br><span class="line">‘基于方法的访问控制’</span><br><span class="line"></span><br><span class="line">‘基于数据的访问控制‘</span><br></pre></td></tr></table></figure></p>
<p>这些都可以用加上‘基于页面的访问控制’来解决</p>
<h3 id="垂直权限"><a href="#垂直权限" class="headerlink" title="垂直权限"></a>垂直权限</h3><p>即‘基于角色的访问控制’，简称RBAC</p>
<p>一个角色实际上就是一个权限的集合，在系统验证权限时，只需要验证用户所属的角色，就可以根据该角色所拥有的权限进行授权。权限管理实际是业务逻辑问题</p>
<h4 id="垂直越权"><a href="#垂直越权" class="headerlink" title="垂直越权"></a>垂直越权</h4><p>低权限的用户获得了高权限角色的能力，则发生了越权访问</p>
<h3 id="水平权限"><a href="#水平权限" class="headerlink" title="水平权限"></a>水平权限</h3><p>即’基于数据的访问控制‘，水平权限问题实际是缺乏一个用户到数据之间的对应关系</p>
<h4 id="水平越权"><a href="#水平越权" class="headerlink" title="水平越权"></a>水平越权</h4><p>A用户访问到了同角色下B用户的数据，没有检查数据是否属于当前用户</p>
<h3 id="防御-10"><a href="#防御-10" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">配置权限时，使用最小权限原则</span><br><span class="line"></span><br><span class="line">使用默认拒绝策略</span><br><span class="line"></span><br><span class="line">只对有需要的主体单独配置允许策略</span><br><span class="line"></span><br><span class="line">通过规则引擎对数据的访问进行控制</span><br><span class="line"></span><br><span class="line">对访问速率进行限制</span><br><span class="line"></span><br><span class="line"> 记录失败的访问控制，并告警</span><br><span class="line"></span><br><span class="line">使用一次性的访问控制机制</span><br><span class="line"></span><br><span class="line">建立访问控制模型以强制执行所有权记录</span><br><span class="line"></span><br><span class="line">用户注销后，令牌失效</span><br></pre></td></tr></table></figure>
<h1 id="安全配置错误"><a href="#安全配置错误" class="headerlink" title="安全配置错误"></a>安全配置错误</h1><h3 id="原理-10"><a href="#原理-10" class="headerlink" title="原理"></a>原理</h3><p>攻击者能够通过未修复的漏洞、访问默认账户、不再使用的页面、未受保护的文件和目录等来取得对系统的未授权的访问。</p>
<h3 id="防御-11"><a href="#防御-11" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">平台最小化安装，移除不适用的功能和框架</span><br><span class="line"></span><br><span class="line">开发、测试和生产环境进行相同配置，并且，每个环境中使用不同的密码</span><br><span class="line"></span><br><span class="line">及时更新升级、打补丁</span><br><span class="line"></span><br><span class="line">进行正确的安全配置和设置的自动化</span><br><span class="line"></span><br><span class="line">安装过程容器化</span><br></pre></td></tr></table></figure>
<h1 id="敏感信息泄露"><a href="#敏感信息泄露" class="headerlink" title="敏感信息泄露"></a>敏感信息泄露</h1><h3 id="原理-11"><a href="#原理-11" class="headerlink" title="原理"></a>原理</h3><p>攻击者在传输过程中或从客户端（例如：浏览器）窃取密钥、发起中间人攻击，或从服<br>务器端窃取明文数据</p>
<h3 id="防御-12"><a href="#防御-12" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">数据分类，根据分类进行访问控制</span><br><span class="line"></span><br><span class="line">用不着保存的、重要的敏感数据，尽快清除</span><br><span class="line"></span><br><span class="line">对存储的所有敏感数据加密</span><br><span class="line"></span><br><span class="line">对传输过程中的数据加密</span><br><span class="line"></span><br><span class="line">使用密码专用算法存储密码，bcrypt为密码存储设计的算法，可抵抗彩虹表的攻击 </span><br><span class="line"></span><br><span class="line">HSTS可防止中间人攻击</span><br></pre></td></tr></table></figure>
<h1 id="不安全的反序列化"><a href="#不安全的反序列化" class="headerlink" title="不安全的反序列化"></a>不安全的反序列化</h1><h3 id="原理-12"><a href="#原理-12" class="headerlink" title="原理"></a>原理</h3><p>序列化：把对象转换为字节序列的过程称为对象的序列化<br>反序列化：把字节序列恢复为对象的过程称为对象的反序列化</p>
<p>如果反序列化进攻者提供的敌意或者篡改过的对象将会使将应用程序和API变的脆弱，可能导致远程代码执行攻击</p>
<h3 id="防御-13"><a href="#防御-13" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">完整性检查，进行数字签名</span><br><span class="line"></span><br><span class="line">隔离运行反序列化的代码</span><br><span class="line"></span><br><span class="line">记录反序列化的失败信息</span><br><span class="line"></span><br><span class="line">限制反序列化网络连接</span><br></pre></td></tr></table></figure>
<h1 id="使用含有已知漏洞的组件"><a href="#使用含有已知漏洞的组件" class="headerlink" title="使用含有已知漏洞的组件"></a>使用含有已知漏洞的组件</h1><h3 id="原理-13"><a href="#原理-13" class="headerlink" title="原理"></a>原理</h3><p>基于组件开发的模式使得多数开发团队根本不了解其应用或API中使用的组件，更谈不上及时更新这些组件了</p>
<h3 id="防御-14"><a href="#防御-14" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">移除不需要的依赖、功能和组件</span><br><span class="line"></span><br><span class="line">关注所用组件的漏洞警告</span><br><span class="line"></span><br><span class="line">及时根据组件的漏洞警告，更新升级和打补丁</span><br><span class="line"></span><br><span class="line">从官网下载组件，并进行校验</span><br></pre></td></tr></table></figure>
<h1 id="不足的日志记录和监控"><a href="#不足的日志记录和监控" class="headerlink" title="不足的日志记录和监控"></a>不足的日志记录和监控</h1><h3 id="原理-14"><a href="#原理-14" class="headerlink" title="原理"></a>原理</h3><p>攻击者依靠监控的不足和响应的不及时完成攻击后却不被知晓</p>
<h3 id="防御-15"><a href="#防御-15" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">将所有登录、访问控制失败、输入验证失败记录到日志中去</span><br><span class="line"></span><br><span class="line">完整性控制的审计，防止篡改、删除</span><br><span class="line"></span><br><span class="line">建立监控和告警机制</span><br><span class="line"></span><br><span class="line">建立应急响应机制和恢复计划</span><br><span class="line"></span><br><span class="line">ELK和zabbix以及Jumpserver堡垒机的使用</span><br></pre></td></tr></table></figure>
<h1 id="如何实施安全评估"><a href="#如何实施安全评估" class="headerlink" title="如何实施安全评估"></a>如何实施安全评估</h1><h4 id="资产等级划分"><a href="#资产等级划分" class="headerlink" title="资产等级划分"></a>资产等级划分</h4><h4 id="威胁分析"><a href="#威胁分析" class="headerlink" title="威胁分析"></a>威胁分析</h4><h4 id="风险分析"><a href="#风险分析" class="headerlink" title="风险分析"></a>风险分析</h4><h4 id="确认解决方案"><a href="#确认解决方案" class="headerlink" title="确认解决方案"></a>确认解决方案</h4><h1 id="DNS欺骗"><a href="#DNS欺骗" class="headerlink" title="DNS欺骗"></a>DNS欺骗</h1><p>DNS欺骗就是攻击者冒充域名服务器的一种欺骗行为。<br>原理：如果可以冒充域名服务器，然后把查询的IP地址设为攻击者的IP地址，这样的话，用户上网就只能看到攻击者的主页，而不是用户想要取得的网站的主页了，这就是DNS欺骗的基本原理。DNS欺骗其实并不是真的“黑掉”了对方的网站，而是冒名顶替、招摇撞骗罢了</p>
<h1 id="DDOS"><a href="#DDOS" class="headerlink" title="DDOS"></a>DDOS</h1><p>原理：利用合理的请求造成资源过载，导致服务不可用</p>
<h2 id="网络层DDOS"><a href="#网络层DDOS" class="headerlink" title="网络层DDOS"></a>网络层DDOS</h2><h3 id="攻击方式"><a href="#攻击方式" class="headerlink" title="攻击方式"></a>攻击方式</h3><p>目前主流的DDoS攻击方式主要包括：</p>
<p>传统攻击：ICMP Flood、UDP Flood、SYN Flood、HTTP Flood等；</p>
<p>反射放大攻击：NTP Flood、SSDP Flood、DNS Flood等；</p>
<p>以及根据攻击目标的特点进行的有针对性的混合攻击。 </p>
<h3 id="SYN-Flood攻击"><a href="#SYN-Flood攻击" class="headerlink" title="SYN Flood攻击"></a>SYN Flood攻击</h3><p>SYN Flood是一种最为经典的DDOS攻击，SYN Flood利用了TCP协议的缺陷</p>
<h5 id="TCP三次握手过程："><a href="#TCP三次握手过程：" class="headerlink" title="TCP三次握手过程："></a>TCP三次握手过程：</h5><p>客户端向服务端发送一个SYN包</p>
<p>服务器端收到后，向客户端发送一个SYN+ACK包</p>
<p>客户端收到后，向服务端返回一个ACK确认包</p>
<h5 id="攻击原理"><a href="#攻击原理" class="headerlink" title="攻击原理"></a>攻击原理</h5><p>SYN Flood攻击，首先伪造大量的源IP地址，分别向服务端发送大量的SYN 包，服务器返回确认包，因为源地址是伪造的，所以伪造的IP不会应答，服务端会重试，超时后丢弃这个链接。攻击者大量发送这种伪造的SYN请求，服务端将会消耗非常多的资源来处理这种半连接，无法顾及正常的连接请求，导致拒绝服务。</p>
<h5 id="防御对抗"><a href="#防御对抗" class="headerlink" title="防御对抗"></a>防御对抗</h5><p>SYN cookie/SYN proxy</p>
<p>加大带宽，与运营商合作、进行流量清洗</p>
<h2 id="应用层DDOS"><a href="#应用层DDOS" class="headerlink" title="应用层DDOS"></a>应用层DDOS</h2><h4 id="CC攻击"><a href="#CC攻击" class="headerlink" title="CC攻击"></a>CC攻击</h4><p>为挑战绿盟的黑洞反DDOS设备，而命名</p>
<p>攻击原理很简单，就是对一些消耗资源大的应用页面不断发起正常的请求，以达到消耗服务器资源的目的。</p>
<p>防御：</p>
<p><code>在应用中限制每个客户端的请求频率，在网络架构上做好优化</code></p>
<h4 id="防御应用层DDOS"><a href="#防御应用层DDOS" class="headerlink" title="防御应用层DDOS"></a>防御应用层DDOS</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在Apache配置中，可以调小Timeout、KeepAliveTimeout值，增大MaxClients值</span><br><span class="line"></span><br><span class="line">验证码 </span><br><span class="line"></span><br><span class="line">限制单个IP的访问频率</span><br></pre></td></tr></table></figure>
<h4 id="慢速攻击slowloris"><a href="#慢速攻击slowloris" class="headerlink" title="慢速攻击slowloris"></a>慢速攻击slowloris</h4><h5 id="原理-15"><a href="#原理-15" class="headerlink" title="原理"></a>原理</h5><p>以极低的速度往服务器发送HTTP请求，由于web  server的所有连接都将被恶意连接占用（构造畸形的HTTP请求），从而无法接受新的请求，导致拒绝服务。本质是对有限资源 的无限制滥用</p>
<h5 id="防御-16"><a href="#防御-16" class="headerlink" title="防御"></a>防御</h5><p><code>调大MaxClient值</code></p>
<h4 id="HTTP-POST-DOS"><a href="#HTTP-POST-DOS" class="headerlink" title="HTTP  POST  DOS"></a>HTTP  POST  DOS</h4><h5 id="原理-16"><a href="#原理-16" class="headerlink" title="原理"></a>原理</h5><p>在发送post包时，指定一个非常大的Content-Length值，然后以很低的速度发包，保持住这个连接不断开，这样当客户端连接数多了以后，占住所有的可用连接，从而导致DOS</p>
<h5 id="防御-17"><a href="#防御-17" class="headerlink" title="防御"></a>防御</h5><p><code>调大MaxCLient值</code></p>
<h3 id="防御-18"><a href="#防御-18" class="headerlink" title="防御"></a>防御</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用专业的抗DDOS设备。</span><br><span class="line"></span><br><span class="line">配置防火墙、web防火墙、入侵检测等防范系统，减缓攻击。</span><br><span class="line"></span><br><span class="line">在网络结构上做好优化，采取合适的安全域划分，采用分布式组网、负载均衡、提升系统容量等可靠性措施，增强总体服务能力。</span><br><span class="line"></span><br><span class="line">尽可能对系统加载最新补丁，并采取有效的合规性配置，降低漏洞利用风险；</span><br><span class="line"></span><br><span class="line">应用代码要做好性能有化，合理使用memcache，将数据库的压力尽可能的转移到内存。及时释放资源，关闭数据库连接，减少空连接等。</span><br><span class="line"></span><br><span class="line">合理的配置webserver，在应用中针对每个客户端做以一个请求频率的限制。通过IP地址与cookie定位一个客户端，如果客户端的请求在一段时间内过于频繁，则所有的请求都重定向到一个错误的页面。</span><br></pre></td></tr></table></figure>
<h1 id="云安全"><a href="#云安全" class="headerlink" title="云安全"></a>云安全</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">云——恶意软件之家</span><br><span class="line"></span><br><span class="line">云——内部安全飞地</span><br><span class="line"></span><br><span class="line">云——数据冗余专家</span><br><span class="line"></span><br><span class="line">混合云是大型企业的更好选择</span><br><span class="line"></span><br><span class="line">云——第三方安全是最佳防护。</span><br><span class="line"></span><br><span class="line">在可信第三方的帮助下，用户可切换至现有软件的云版本。他们会不时辅助企业，帮企业解决问题，躲在第三方的羽翼下是很安全的。</span><br></pre></td></tr></table></figure>
<h1 id="浏览器同源策略"><a href="#浏览器同源策略" class="headerlink" title="浏览器同源策略"></a>浏览器同源策略</h1><h4 id="’同源‘指的是三个相同："><a href="#’同源‘指的是三个相同：" class="headerlink" title="’同源‘指的是三个相同："></a>’同源‘指的是三个相同：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">协议相同</span><br><span class="line"></span><br><span class="line">域名相同</span><br><span class="line"></span><br><span class="line">端口相同</span><br></pre></td></tr></table></figure>
<h4 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h4><p>同源策略的目的，是为了保护用户信息安全，防止恶意的网站窃取数据</p>
<h4 id="限制范围"><a href="#限制范围" class="headerlink" title="限制范围"></a>限制范围</h4><p>Cookie、LocalStorage 和 IndexDB 无法读取</p>
<p>DOM 无法获得</p>
<p> AJAX 请求不能发送</p>
<h4 id="规避同源策略"><a href="#规避同源策略" class="headerlink" title="规避同源策略"></a>规避同源策略</h4><p>在cookie和iframe窗口，设置相同document.domain</p>
<p>LocalStorage 和 IndexDB，设置PostMessage API</p>
<h1 id="中间件加固"><a href="#中间件加固" class="headerlink" title="中间件加固"></a>中间件加固</h1><h3 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h3><h5 id="账户口令："><a href="#账户口令：" class="headerlink" title="账户口令："></a>账户口令：</h5><p>是否隐藏版本号及其他敏感信息</p>
<p>检查是否有专门的用户账户和组来运行</p>
<h5 id="日志配置："><a href="#日志配置：" class="headerlink" title="日志配置："></a>日志配置：</h5><p>是否配置了日志功能</p>
<h5 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h5><p>是否设置了错误页面重定向</p>
<p>是否修改了默认端口</p>
<p>是否禁止访问web页面目录之外的页面</p>
<h3 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h3><h5 id="账户口令：-1"><a href="#账户口令：-1" class="headerlink" title="账户口令："></a>账户口令：</h5><p>是否配置了用户最小权限</p>
<p>是否删除了无关的账户</p>
<h5 id="日志配置：-1"><a href="#日志配置：-1" class="headerlink" title="日志配置："></a>日志配置：</h5><p>是否配置了日志</p>
<h5 id="IP安全设置："><a href="#IP安全设置：" class="headerlink" title="IP安全设置："></a>IP安全设置：</h5><p>是否使用了HTTPs加密</p>
<p>是否改变默认端口8000</p>
<p>是否设置了错误页面重定向</p>
<h1 id="Linux基线"><a href="#Linux基线" class="headerlink" title="Linux基线"></a>Linux基线</h1><p>安全基线（BaseLine）是保持信息系统安全的机密性、完整性、可用性的最小安全控制，是系统的最小安全保证，最基本的安全要求。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">检查是否存在空密码的账户：</span><br><span class="line"></span><br><span class="line">awk -F  &apos;($2==&apos; &apos;)&#123;print $1&#125;&apos;  /etc/shadow</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">检查UID为0的账户：</span><br><span class="line"></span><br><span class="line">awk  -F &apos;($2==&apos; &apos;)&#123;print $1&#125;&apos;  /etc/passwd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">文件权限设置：</span><br><span class="line"></span><br><span class="line">/etc/passwd       644</span><br><span class="line"></span><br><span class="line">/etc/shadow       400</span><br><span class="line"></span><br><span class="line">/etc/group           644</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">检查root目录权限是否为700：</span><br><span class="line"></span><br><span class="line">chmod  0700   /root</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">系统umask设置：</span><br><span class="line"></span><br><span class="line">chmod  027  /etc/profile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">删除或锁定无关用户：</span><br><span class="line"></span><br><span class="line">more   /etc/passwd    /etc/shadow</span><br><span class="line"></span><br><span class="line">无关账户包括测试账户、共享账户、长期不用的账户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">不重复使用的口令：</span><br><span class="line"></span><br><span class="line">cat  /etc/pam.d/system-auth</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">禁止超级用户远程登录：</span><br><span class="line"></span><br><span class="line">more  /etc/pam.d/login</span><br><span class="line"></span><br><span class="line">将用户账户分配到相应的用户组：</span><br><span class="line"></span><br><span class="line">more  /etc/group</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">口令策略：</span><br><span class="line"></span><br><span class="line">more   /etc/login.defs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">密码复杂程度：</span><br><span class="line"></span><br><span class="line">/etc/pam.d/system-auth</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">设定连续失败认证次数：</span><br><span class="line"></span><br><span class="line">cat  /etc/pam.d/system-auth</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">syslog系统日志:</span><br><span class="line"></span><br><span class="line">chmod    640  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">设置日志服务器:</span><br><span class="line"></span><br><span class="line">vi /etc/rsyslog.conf</span><br><span class="line">加上这一行：</span><br><span class="line"></span><br><span class="line">* . *   @192.168.0.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">是否记录成功登陆日志:</span><br><span class="line"></span><br><span class="line">last</span><br><span class="line"></span><br><span class="line">安全选项--交互式登录中，“无须按Ctrl+Alt+Del”  配置项需启用还是禁用？</span><br><span class="line">启用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">基线要求，安全日志容量一般设置为多少？</span><br><span class="line"></span><br><span class="line">20480</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">设定远程登录的IP地址范围:</span><br><span class="line"></span><br><span class="line">查看/etc/hosts.allow和/etc/hosts.deny两个文件中是否设定了IP范围限制</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">远程登录取消telnet采用ssh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">登录超时退出在哪个配置文件中配置？如何配置?</span><br><span class="line"></span><br><span class="line">/etc/profile和/etc/csh.cshrc中</span><br><span class="line">配置：</span><br><span class="line">Vim /etc/csh.cshrc |grep -i autologoutsource /etc/profile</span><br><span class="line">set autologout =30</span><br></pre></td></tr></table></figure></p>
<h1 id="爬虫scrapy框架"><a href="#爬虫scrapy框架" class="headerlink" title="爬虫scrapy框架"></a>爬虫scrapy框架</h1><h4 id="scrapy引擎"><a href="#scrapy引擎" class="headerlink" title="scrapy引擎"></a>scrapy引擎</h4><p>是整个scrapy架构的核心，负责控制整个数据处理流程，以及事物处理</p>
<h4 id="调度器"><a href="#调度器" class="headerlink" title="调度器"></a>调度器</h4><p>主要实现存储待爬取的网址，并确定这些网址的优先级，决定下一次爬取哪个网址等</p>
<h4 id="下载器"><a href="#下载器" class="headerlink" title="下载器"></a>下载器</h4><p>主要实现对网络上要爬取的网页资源进行高速下载</p>
<h4 id="下载中间件"><a href="#下载中间件" class="headerlink" title="下载中间件"></a>下载中间件</h4><p>处于下载器和scrapy引擎之间的一个特定的组件，主要是对下载器和scrapy引擎之间的通信进行处理</p>
<h4 id="蜘蛛"><a href="#蜘蛛" class="headerlink" title="蜘蛛"></a>蜘蛛</h4><p>框架中爬虫实现的核心，在一个项目中，可以有多个爬虫，每个蜘蛛可以负责一个或多个特定的网站</p>
<h4 id="爬虫中间件"><a href="#爬虫中间件" class="headerlink" title="爬虫中间件"></a>爬虫中间件</h4><p>处于scrapy引擎与爬虫组件之间的一个组件，用于对爬虫组件和scrapy引擎之间通信进行处理</p>
<h1 id="session与cookie"><a href="#session与cookie" class="headerlink" title="session与cookie"></a>session与cookie</h1><h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><p>cookie保存在客户端，未设置存储时间的cookie为会话cookie保存在浏览器的进程开辟的内存中，当浏览器关闭后会话cookie也会被删除；设置了存储时间的cookie保存在用户设备的磁盘中直到过期。session保存在服务器端，存储在IIS的进程开辟的内存中。</p>
<h4 id="联系"><a href="#联系" class="headerlink" title="联系"></a>联系</h4><p>当服务器端生成一个session时就会向客户端发送一个cookie保存在客户端，这个cookie保存的是session的sessionId。这样才能保证客户端发起请求后客户端已经登录的用户能够与服务器端成千上万的session中准确匹配到已经保存了该用户信息的session，同时也能够确保不同页面之间传值时的正确匹配。</p>
<h1 id="htmlspecialchars详解"><a href="#htmlspecialchars详解" class="headerlink" title="htmlspecialchars详解"></a>htmlspecialchars详解</h1><p>这个函数的功能是把预定义的字符转换为 HTML 实体</p>
<p>它的语法如下：</p>
<p>htmlspecialchars(string,flags,character-set,double_encode)</p>
<p>其中第二个参数flags需要重要注意，很多开发者就是因为没有注意到这个参数导致使用htmlspecialchars()函数过滤XSS时被绕过。因为flags参数对于引号的编码如下：</p>
<p>可用的引号类型：</p>
<pre><code>ENT_COMPAT - 默认。仅编码双引号。
ENT_QUOTES - 编码双引号和单引号。
ENT_NOQUOTES - 不编码任何引号。
</code></pre><p>默认是只编码双引号的！默认只编码双引号！默认只编码双引号，所以要加上加上ENT_QUOTES参数</p>

      
    </div>
	
	<div>
	
		<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>史前感谢您的来访-------------</div>
    
</div>
	
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/web安全/" rel="tag"># web安全</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/04/万能密码原理/" rel="next" title="万能密码原理">
                <i class="fa fa-chevron-left"></i> 万能密码原理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/06/windows安全基础/" rel="prev" title="windows基础">
                windows基础 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">shiqian</p>
              <p class="site-description motion-element" itemprop="description">繁华一场梦</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#注入"><span class="nav-number">1.</span> <span class="nav-text">注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL注入"><span class="nav-number">1.1.</span> <span class="nav-text">SQL注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理："><span class="nav-number">1.1.1.</span> <span class="nav-text">原理：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#产生条件"><span class="nav-number">1.1.2.</span> <span class="nav-text">产生条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御"><span class="nav-number">1.1.3.</span> <span class="nav-text">防御</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XML实体注入-XXE"><span class="nav-number">1.2.</span> <span class="nav-text">XML实体注入(XXE)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理：-1"><span class="nav-number">1.2.1.</span> <span class="nav-text">原理：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御："><span class="nav-number">1.2.2.</span> <span class="nav-text">防御：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码注入"><span class="nav-number">1.3.</span> <span class="nav-text">代码注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#命令执行漏洞"><span class="nav-number">1.3.1.</span> <span class="nav-text">命令执行漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理"><span class="nav-number">1.3.1.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-1"><span class="nav-number">1.3.1.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本地文件包含-LFI"><span class="nav-number">1.3.2.</span> <span class="nav-text">本地文件包含(LFI)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理-1"><span class="nav-number">1.3.2.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-2"><span class="nav-number">1.3.2.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#远程文件包含-RFI"><span class="nav-number">1.3.3.</span> <span class="nav-text">远程文件包含(RFI)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理-2"><span class="nav-number">1.3.3.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-3"><span class="nav-number">1.3.3.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XSS-跨站脚本"><span class="nav-number">2.</span> <span class="nav-text">XSS(跨站脚本)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#XSS分类"><span class="nav-number">2.0.1.</span> <span class="nav-text">XSS分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反射型XSS："><span class="nav-number">2.0.2.</span> <span class="nav-text">反射型XSS：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储型XSS："><span class="nav-number">2.0.3.</span> <span class="nav-text">存储型XSS：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DOM-Based-XSS"><span class="nav-number">2.0.4.</span> <span class="nav-text">DOM  Based  XSS:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御：-1"><span class="nav-number">2.0.5.</span> <span class="nav-text">防御：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XSS与CSRF的区别"><span class="nav-number">2.0.6.</span> <span class="nav-text">XSS与CSRF的区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#请求伪造漏洞"><span class="nav-number">3.</span> <span class="nav-text">请求伪造漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#服务端请求伪造-SSRF"><span class="nav-number">3.0.1.</span> <span class="nav-text">服务端请求伪造(SSRF)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-3"><span class="nav-number">3.0.2.</span> <span class="nav-text">原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-4"><span class="nav-number">3.0.2.0.1.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#跨站请求伪造-CSRF"><span class="nav-number">3.0.3.</span> <span class="nav-text">跨站请求伪造(CSRF)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理-4"><span class="nav-number">3.0.3.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-5"><span class="nav-number">3.0.3.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件处理漏洞"><span class="nav-number">4.</span> <span class="nav-text">文件处理漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#任意文件上传"><span class="nav-number">4.0.1.</span> <span class="nav-text">任意文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理-5"><span class="nav-number">4.0.1.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-6"><span class="nav-number">4.0.1.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#任意文件下载"><span class="nav-number">4.0.2.</span> <span class="nav-text">任意文件下载</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理-6"><span class="nav-number">4.0.2.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-7"><span class="nav-number">4.0.2.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#点击劫持"><span class="nav-number">5.</span> <span class="nav-text">点击劫持</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-7"><span class="nav-number">5.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型"><span class="nav-number">5.0.2.</span> <span class="nav-text">类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Flash点击劫持"><span class="nav-number">5.0.2.0.1.</span> <span class="nav-text">Flash点击劫持</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#图片覆盖攻击-XSIO"><span class="nav-number">5.0.2.0.2.</span> <span class="nav-text">图片覆盖攻击(XSIO)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#拖曳劫持–数据窃取"><span class="nav-number">5.0.2.0.3.</span> <span class="nav-text">拖曳劫持–数据窃取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#触屏劫持"><span class="nav-number">5.0.2.0.4.</span> <span class="nav-text">触屏劫持</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-8"><span class="nav-number">5.0.3.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#认证与会话-失效的身份认证"><span class="nav-number">6.</span> <span class="nav-text">认证与会话-失效的身份认证</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-8"><span class="nav-number">6.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-9"><span class="nav-number">6.0.2.</span> <span class="nav-text">防御</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#密码策略："><span class="nav-number">6.0.2.0.1.</span> <span class="nav-text">密码策略：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#多因素认证"><span class="nav-number">6.0.2.0.2.</span> <span class="nav-text">多因素认证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#限制登录失败次数"><span class="nav-number">6.0.2.0.3.</span> <span class="nav-text">限制登录失败次数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#不要使用默认凭证"><span class="nav-number">6.0.2.0.4.</span> <span class="nav-text">不要使用默认凭证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Session认证"><span class="nav-number">6.0.2.0.5.</span> <span class="nav-text">Session认证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SSO单点登录"><span class="nav-number">6.0.2.0.6.</span> <span class="nav-text">SSO单点登录</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#失效的-访问控制"><span class="nav-number">7.</span> <span class="nav-text">(失效的)访问控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-9"><span class="nav-number">7.0.1.</span> <span class="nav-text">原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#在操作系统中"><span class="nav-number">7.0.1.0.1.</span> <span class="nav-text">在操作系统中</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在web应用中"><span class="nav-number">7.0.1.0.2.</span> <span class="nav-text">在web应用中</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#垂直权限"><span class="nav-number">7.0.2.</span> <span class="nav-text">垂直权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#垂直越权"><span class="nav-number">7.0.2.1.</span> <span class="nav-text">垂直越权</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#水平权限"><span class="nav-number">7.0.3.</span> <span class="nav-text">水平权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#水平越权"><span class="nav-number">7.0.3.1.</span> <span class="nav-text">水平越权</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-10"><span class="nav-number">7.0.4.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安全配置错误"><span class="nav-number">8.</span> <span class="nav-text">安全配置错误</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-10"><span class="nav-number">8.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-11"><span class="nav-number">8.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#敏感信息泄露"><span class="nav-number">9.</span> <span class="nav-text">敏感信息泄露</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-11"><span class="nav-number">9.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-12"><span class="nav-number">9.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#不安全的反序列化"><span class="nav-number">10.</span> <span class="nav-text">不安全的反序列化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-12"><span class="nav-number">10.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-13"><span class="nav-number">10.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用含有已知漏洞的组件"><span class="nav-number">11.</span> <span class="nav-text">使用含有已知漏洞的组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-13"><span class="nav-number">11.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-14"><span class="nav-number">11.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#不足的日志记录和监控"><span class="nav-number">12.</span> <span class="nav-text">不足的日志记录和监控</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理-14"><span class="nav-number">12.0.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-15"><span class="nav-number">12.0.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如何实施安全评估"><span class="nav-number">13.</span> <span class="nav-text">如何实施安全评估</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#资产等级划分"><span class="nav-number">13.0.0.1.</span> <span class="nav-text">资产等级划分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#威胁分析"><span class="nav-number">13.0.0.2.</span> <span class="nav-text">威胁分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#风险分析"><span class="nav-number">13.0.0.3.</span> <span class="nav-text">风险分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#确认解决方案"><span class="nav-number">13.0.0.4.</span> <span class="nav-text">确认解决方案</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DNS欺骗"><span class="nav-number">14.</span> <span class="nav-text">DNS欺骗</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DDOS"><span class="nav-number">15.</span> <span class="nav-text">DDOS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#网络层DDOS"><span class="nav-number">15.1.</span> <span class="nav-text">网络层DDOS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#攻击方式"><span class="nav-number">15.1.1.</span> <span class="nav-text">攻击方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SYN-Flood攻击"><span class="nav-number">15.1.2.</span> <span class="nav-text">SYN Flood攻击</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP三次握手过程："><span class="nav-number">15.1.2.0.1.</span> <span class="nav-text">TCP三次握手过程：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#攻击原理"><span class="nav-number">15.1.2.0.2.</span> <span class="nav-text">攻击原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御对抗"><span class="nav-number">15.1.2.0.3.</span> <span class="nav-text">防御对抗</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#应用层DDOS"><span class="nav-number">15.2.</span> <span class="nav-text">应用层DDOS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CC攻击"><span class="nav-number">15.2.0.1.</span> <span class="nav-text">CC攻击</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#防御应用层DDOS"><span class="nav-number">15.2.0.2.</span> <span class="nav-text">防御应用层DDOS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#慢速攻击slowloris"><span class="nav-number">15.2.0.3.</span> <span class="nav-text">慢速攻击slowloris</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理-15"><span class="nav-number">15.2.0.3.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-16"><span class="nav-number">15.2.0.3.2.</span> <span class="nav-text">防御</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP-POST-DOS"><span class="nav-number">15.2.0.4.</span> <span class="nav-text">HTTP  POST  DOS</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原理-16"><span class="nav-number">15.2.0.4.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#防御-17"><span class="nav-number">15.2.0.4.2.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防御-18"><span class="nav-number">15.2.1.</span> <span class="nav-text">防御</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#云安全"><span class="nav-number">16.</span> <span class="nav-text">云安全</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#浏览器同源策略"><span class="nav-number">17.</span> <span class="nav-text">浏览器同源策略</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#’同源‘指的是三个相同："><span class="nav-number">17.0.0.1.</span> <span class="nav-text">’同源‘指的是三个相同：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#目的"><span class="nav-number">17.0.0.2.</span> <span class="nav-text">目的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#限制范围"><span class="nav-number">17.0.0.3.</span> <span class="nav-text">限制范围</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#规避同源策略"><span class="nav-number">17.0.0.4.</span> <span class="nav-text">规避同源策略</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#中间件加固"><span class="nav-number">18.</span> <span class="nav-text">中间件加固</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Apache"><span class="nav-number">18.0.1.</span> <span class="nav-text">Apache</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#账户口令："><span class="nav-number">18.0.1.0.1.</span> <span class="nav-text">账户口令：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#日志配置："><span class="nav-number">18.0.1.0.2.</span> <span class="nav-text">日志配置：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#其他："><span class="nav-number">18.0.1.0.3.</span> <span class="nav-text">其他：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tomcat"><span class="nav-number">18.0.2.</span> <span class="nav-text">tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#账户口令：-1"><span class="nav-number">18.0.2.0.1.</span> <span class="nav-text">账户口令：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#日志配置：-1"><span class="nav-number">18.0.2.0.2.</span> <span class="nav-text">日志配置：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#IP安全设置："><span class="nav-number">18.0.2.0.3.</span> <span class="nav-text">IP安全设置：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux基线"><span class="nav-number">19.</span> <span class="nav-text">Linux基线</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#爬虫scrapy框架"><span class="nav-number">20.</span> <span class="nav-text">爬虫scrapy框架</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#scrapy引擎"><span class="nav-number">20.0.0.1.</span> <span class="nav-text">scrapy引擎</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#调度器"><span class="nav-number">20.0.0.2.</span> <span class="nav-text">调度器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#下载器"><span class="nav-number">20.0.0.3.</span> <span class="nav-text">下载器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#下载中间件"><span class="nav-number">20.0.0.4.</span> <span class="nav-text">下载中间件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#蜘蛛"><span class="nav-number">20.0.0.5.</span> <span class="nav-text">蜘蛛</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#爬虫中间件"><span class="nav-number">20.0.0.6.</span> <span class="nav-text">爬虫中间件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#session与cookie"><span class="nav-number">21.</span> <span class="nav-text">session与cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#区别"><span class="nav-number">21.0.0.1.</span> <span class="nav-text">区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#联系"><span class="nav-number">21.0.0.2.</span> <span class="nav-text">联系</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#htmlspecialchars详解"><span class="nav-number">22.</span> <span class="nav-text">htmlspecialchars详解</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shiqian</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
